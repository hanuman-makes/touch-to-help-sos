<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Touch-to-Help SOS</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
    }

    h1 {
      background: red;
      color: white;
      padding: 18px;
      margin: 0;
      font-size: 26px;
    }

    .card {
      background: white;
      margin: 15px;
      padding: 18px;
      border-radius: 15px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    button {
      width: 90%;
      padding: 16px;
      font-size: 18px;
      margin: 10px auto;
      border: none;
      border-radius: 14px;
      cursor: pointer;
      display: block;
    }

    button:disabled {
      background: gray !important;
      cursor: not-allowed;
    }

    .green { background: green; color: white; }
    .blue { background: blue; color: white; }
    .orange { background: orange; color: white; }

    .langBtn {
      width: auto;
      padding: 8px 14px;
      margin: 5px;
      font-size: 14px;
      border-radius: 10px;
      background: black;
      color: white;
      display: inline-block;
    }

    #status {
      font-weight: bold;
      font-size: 16px;
    }
  </style>
</head>

<body>

  <!-- Title -->
  <h1 id="title">üö® Touch-to-Help SOS üö®</h1>

  <!-- Language Switch -->
  <div>
    <button class="langBtn" onclick="setLanguage('en')">English</button>
    <button class="langBtn" onclick="setLanguage('kn')">‡≤ï‡≤®‡≥ç‡≤®‡≤°</button>
    <button class="langBtn" onclick="setLanguage('hi')">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
  </div>

  <!-- Status Card -->
  <div class="card">
    <p id="status">üìç Getting Live Location...</p>
  </div>

  <!-- SOS Buttons -->
  <button id="ambulanceBtn" class="green" onclick="callNumber('108')" disabled>
    üöë Call Ambulance
  </button>

  <button id="policeBtn" class="blue" onclick="callNumber('100')" disabled>
    üëÆ Call Police
  </button>

  <button id="familyBtn" class="orange" onclick="sendWhatsApp()" disabled>
    üÜò WhatsApp Family
  </button>

  <script>
    /***********************
     * CONFIGURATION
     ***********************/
    const FAMILY_NUMBER = "919999888777"; // Change this number

    let liveLocationURL = "";

    /***********************
     * MULTI-LANGUAGE TEXT
     ***********************/
    const LANG_TEXT = {
      en: {
        title: "üö® Touch-to-Help SOS üö®",
        statusReady: "‚úÖ Location Ready. Tap a button.",
        ambulance: "üöë Call Ambulance",
        police: "üëÆ Call Police",
        family: "üÜò WhatsApp Family"
      },
      kn: {
        title: "üö® ‡≤§‡≤ï‡≥ç‡≤∑‡≤£ ‡≤∏‡≤π‡≤æ‡≤Ø SOS üö®",
        statusReady: "‚úÖ ‡≤∏‡≥ç‡≤•‡≤≥ ‡≤∏‡≤ø‡≤¶‡≥ç‡≤ß‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤¨‡≤ü‡≤®‡≥ç ‡≤í‡≤§‡≥ç‡≤§‡≤ø.",
        ambulance: "üöë ‡≤Ü‡≤Ç‡≤¨‡≥Å‡≤≤‡≥Ü‡≤®‡≥ç‡≤∏‡≥ç ‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø",
        police: "üëÆ ‡≤™‡≥ä‡≤≤‡≥Ä‡≤∏‡≥ç ‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø",
        family: "üÜò ‡≤ï‡≥Å‡≤ü‡≥Å‡≤Ç‡≤¨‡≤ï‡≥ç‡≤ï‡≥Ü WhatsApp"
      },
      hi: {
        title: "üö® ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ SOS üö®",
        statusReady: "‚úÖ ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à‡•§ ‡§¨‡§ü‡§® ‡§¶‡§¨‡§æ‡§è‡§Ç‡•§",
        ambulance: "üöë ‡§è‡§Æ‡•ç‡§¨‡•Å‡§≤‡•á‡§Ç‡§∏ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç",
        police: "üëÆ ‡§™‡•Å‡§≤‡§ø‡§∏ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç",
        family: "üÜò ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•ã WhatsApp"
      }
    };

    /***********************
     * LANGUAGE FUNCTIONS
     ***********************/
    function setLanguage(lang) {
      const t = LANG_TEXT[lang] || LANG_TEXT.en;

      document.getElementById("title").innerText = t.title;
      document.getElementById("ambulanceBtn").innerText = t.ambulance;
      document.getElementById("policeBtn").innerText = t.police;
      document.getElementById("familyBtn").innerText = t.family;
    }

    function autoDetectLanguage() {
      const browserLang = navigator.language.slice(0, 2);
      setLanguage(browserLang);
    }

    /***********************
     * LOCATION FUNCTIONS
     ***********************/
    function enableButtons() {
      document.getElementById("ambulanceBtn").disabled = false;
      document.getElementById("policeBtn").disabled = false;
      document.getElementById("familyBtn").disabled = false;
    }

    function getLiveLocation() {
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;

          liveLocationURL = `https://maps.google.com/?q=${lat},${lon}`;

          document.getElementById("status").innerText =
            LANG_TEXT.en.statusReady;

          enableButtons();
        },
        () => {
          document.getElementById("status").innerText =
            "‚ùå Location Permission Denied!";
        }
      );
    }

    /***********************
     * EMERGENCY ACTIONS
     ***********************/
    function callNumber(num) {
      window.location.href = "tel:" + num;
    }

    function sendWhatsApp() {
      const message =
        `üö® EMERGENCY ALERT!\nHelp needed immediately.\n\nüìç Location:\n${liveLocationURL}`;

      const url =
        `https://wa.me/${FAMILY_NUMBER}?text=${encodeURIComponent(message)}`;

      window.open(url, "_blank");
    }

    /***********************
     * START WEBSITE
     ***********************/
    autoDetectLanguage();
    getLiveLocation();
  </script>

</body>
</html>